<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Hexiwear KW40 Firmware Reference Manual: Safa Detector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="hexiweare_logo_main_black.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hexiwear KW40 Firmware Reference Manual
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Mikroelektronika</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Safa Detector<div class="ingroups"><a class="el" href="group__ftapi.html">Freescale Touch User API</a> &raquo; <a class="el" href="group__detectors.html">Key Detectors</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structft__keydetector__safa.html">ft_keydetector_safa</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga54ec097ebcf557346e3cbdb6e33033fd"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structft__keydetector__safa.html">ft_keydetector_safa</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__safa.html#ga54ec097ebcf557346e3cbdb6e33033fd">ft_keydetector_safa_default</a></td></tr>
<tr class="separator:ga54ec097ebcf557346e3cbdb6e33033fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc6d71bb19f360f1cd50628ce47404b0"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structft__keydetector__interface.html">ft_keydetector_interface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__safa.html#gafc6d71bb19f360f1cd50628ce47404b0">ft_keydetector_safa_interface</a></td></tr>
<tr class="separator:gafc6d71bb19f360f1cd50628ce47404b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Safa key detector is a method for recognizing the touch or release states. It can be used for each type of control.</p>
<p>If the measured sample is reported as a valid sample, the module calculates the delta value from the actual signal and baseline values. The delta value is compared to the threshold value computed from the expected signal and baseline values. Based on the result, it determines the electrode state, which can be released, touched, changing from released to touch, and changing from touched to release. This method is using moving average filters to determine the baseline and the expected signal values, with different depth of the filter, depending on the state of the electrode. The deadband filters in the horizontal and vertical directions are also implemented. </p>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga54ec097ebcf557346e3cbdb6e33033fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structft__keydetector__safa.html">ft_keydetector_safa</a> ft_keydetector_safa_default</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The default Safa settings of the key detector are:</p><ul>
<li>signal_filter (2 by default)</li>
<li>base_avrg (9 by default, which means 512 samples)</li>
<li>non_activity_avrg (FT_FILTER_MOVING_AVERAGE_MAX_ORDER by default, which means 65K samples)</li>
<li>entry_event_cnt (8 by default)</li>
<li>signal_to_noise_ratio (16 by default)</li>
<li>deadband (10 by default)</li>
<li>min_noise_limit (20 by default) Here is an example definition of the default values for SAFA ASC: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;const struct ft_keydetector_safa ft_keydetector_safa_default = </div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    .signal_filter = 2,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    .base_avrg = {.n2_order = 9},</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    .non_activity_avrg =  {.n2_order = FT_FILTER_MOVING_AVERAGE_MAX_ORDER},</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    .entry_event_cnt = 8,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    .signal_to_noise_ratio = 16,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    .deadband = 10,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    .min_noise_limit = 20,</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;};</div></div><!-- fragment --> </li>
</ul>

</div>
</div>
<a class="anchor" id="gafc6d71bb19f360f1cd50628ce47404b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structft__keydetector__interface.html">ft_keydetector_interface</a> ft_keydetector_safa_interface</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SAFA key detector interface structure. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
