<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Hexiwear KW40 Firmware Reference Manual: API Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="hexiweare_logo_main_black.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hexiwear KW40 Firmware Reference Manual
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Mikroelektronika</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">API Functions<div class="ingroups"><a class="el" href="group__ftapi.html">Freescale Touch User API</a> &raquo; <a class="el" href="group__system.html">System</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad603a0aa1bd902f8806fdce53d59bd59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#gad603a0aa1bd902f8806fdce53d59bd59">ft_system_register_callback</a> (<a class="el" href="group__system.html#ga28f4a21ff708fad081dca489456b5d7c">ft_system_callback</a> callback)</td></tr>
<tr class="memdesc:gad603a0aa1bd902f8806fdce53d59bd59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register the system callback function.  <a href="#gad603a0aa1bd902f8806fdce53d59bd59">More...</a><br /></td></tr>
<tr class="separator:gad603a0aa1bd902f8806fdce53d59bd59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76a90c08a7175de6f002d7b6bc8787d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#ga76a90c08a7175de6f002d7b6bc8787d5">ft_error_register_callback</a> (<a class="el" href="group__system.html#gaeb0430959706ba0cb31a372325e59228">ft_error_callback</a> callback)</td></tr>
<tr class="memdesc:ga76a90c08a7175de6f002d7b6bc8787d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register the system error callback function.  <a href="#ga76a90c08a7175de6f002d7b6bc8787d5">More...</a><br /></td></tr>
<tr class="separator:ga76a90c08a7175de6f002d7b6bc8787d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60abca0875fa02462858cb5aaf5a9c0c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#ga60abca0875fa02462858cb5aaf5a9c0c">ft_system_get_time_counter</a> (void)</td></tr>
<tr class="memdesc:ga60abca0875fa02462858cb5aaf5a9c0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the system time counter.  <a href="#ga60abca0875fa02462858cb5aaf5a9c0c">More...</a><br /></td></tr>
<tr class="separator:ga60abca0875fa02462858cb5aaf5a9c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae04b34febe878976bb1a576117ebcc07"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#gae04b34febe878976bb1a576117ebcc07">ft_system_get_time_offset</a> (uint32_t event_stamp)</td></tr>
<tr class="memdesc:gae04b34febe878976bb1a576117ebcc07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the system time counter offset.  <a href="#gae04b34febe878976bb1a576117ebcc07">More...</a><br /></td></tr>
<tr class="separator:gae04b34febe878976bb1a576117ebcc07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2783a390b894df2d90b13086e1ccaab5"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#ga2783a390b894df2d90b13086e1ccaab5">ft_mem_get_free_size</a> (void)</td></tr>
<tr class="memdesc:ga2783a390b894df2d90b13086e1ccaab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the free memory size in the FT memory pool.  <a href="#ga2783a390b894df2d90b13086e1ccaab5">More...</a><br /></td></tr>
<tr class="separator:ga2783a390b894df2d90b13086e1ccaab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff9024c6f34bf486aabde1b7da727f52"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#gaff9024c6f34bf486aabde1b7da727f52">ft_init</a> (const struct <a class="el" href="structft__system.html">ft_system</a> *system, uint8_t *pool, const uint32_t size)</td></tr>
<tr class="memdesc:gaff9024c6f34bf486aabde1b7da727f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Freescale Touch Library initialization.  <a href="#gaff9024c6f34bf486aabde1b7da727f52">More...</a><br /></td></tr>
<tr class="separator:gaff9024c6f34bf486aabde1b7da727f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14cde39a0c9235c7212f936ad149ca9f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#ga14cde39a0c9235c7212f936ad149ca9f">ft_task</a> (void)</td></tr>
<tr class="memdesc:ga14cde39a0c9235c7212f936ad149ca9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Freescale Touch Main processing entry point.  <a href="#ga14cde39a0c9235c7212f936ad149ca9f">More...</a><br /></td></tr>
<tr class="separator:ga14cde39a0c9235c7212f936ad149ca9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c3d292e73744476ecab6d5f0423e388"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__api.html#ga8c3d292e73744476ecab6d5f0423e388">ft_trigger</a> (void)</td></tr>
<tr class="memdesc:ga8c3d292e73744476ecab6d5f0423e388"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main Trigger function to acquire the touch-sensing data.  <a href="#ga8c3d292e73744476ecab6d5f0423e388">More...</a><br /></td></tr>
<tr class="separator:ga8c3d292e73744476ecab6d5f0423e388"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>General Function definition of the system. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga76a90c08a7175de6f002d7b6bc8787d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ft_error_register_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__system.html#gaeb0430959706ba0cb31a372325e59228">ft_error_callback</a>&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register the system error callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>Pointer to the callback function, which will receive the error event notifications. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none After this callback finishes, the driver falls to a never ending loop. This is an example of installing and using the parameters of the FT library error handler: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;static void my_ft_error_callback(char *file_name, uint32_t line);</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;// For library debugging only, install the error handler</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;ft_error_register_callback(my_ft_error_callback)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;// The FT error-handling routine</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;static void my_ft_error_callback(char *file_name, uint32_t line)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;{</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  printf(&quot;\nError occured in the FT library. File: %s, Line: %d.\n&quot;, file_name, line);</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gaff9024c6f34bf486aabde1b7da727f52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ft_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structft__system.html">ft_system</a> *&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Freescale Touch Library initialization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">system</td><td>Pointer to the FT system parameters structure. </td></tr>
    <tr><td class="paramname">pool</td><td>Pointer to the memory pool what will be used for internal FT data. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the memory pool handled by the parameter pool (needed size depends on the number of components used in the FT - electrodes, modules, controls, and so on). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>FT_SUCCESS if library was properly initialized,</li>
<li>FT_FAILURE if initialization failed (one of the reasons is not enough memory in the memory pool).</li>
</ul>
</dd></dl>
<p>This function validates the Freescale Touch configuration passed within the <a class="el" href="structft__system.html">ft_system</a> structure. After this call, the system structure becomes the main data provider for the application. There are also created and filled-up internal volatile data structures used by the driver. It is the user's responsibility to prepare the configuration of all electrodes, modules, and controls in the system structure before calling this function. The application should not execute any other FT library calls if this function returns FT_FAILURE. This is an example of the FT library initialization: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;uint8_t ft_memory_pool[512];</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;if(ft_init(&amp;my_ft_system_params, ft_memory_pool, sizeof(ft_memory_pool)) == FT_FAILURE)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;{</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  printf(&quot;Initialization of FT failed. There can be a problem with the memory size</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  or invalid parameters in component parameter structures.&quot;);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;// The FT is successfuly initialized</div></div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga2783a390b894df2d90b13086e1ccaab5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ft_mem_get_free_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the free memory size in the FT memory pool. </p>
<dl class="section return"><dt>Returns</dt><dd>size of unused memory in the FT memory pool</dd></dl>
<p>This can be used in debugging of the driver to specify the exact size of the Freescale Touch memory pool needed. This is an example of initializing the FT library and checking the final size: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;uint8_t ft_memory_pool[512];</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;if(ft_init(&amp;my_ft_system_params, ft_memory_pool, sizeof(ft_memory_pool)) == FT_FAILURE)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;{</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  printf(&quot;Initialization of the FT failed. There may be a problem with the memory size,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  or invalid parameters in the componented parameter structures.&quot;);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;// The FT is successfuly initialized</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;printf(&quot;The unused memory size is: &amp;d Bytes. The memory pool can be reduced </div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;by this size.&quot;, ft_mem_get_free_size());</div></div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga60abca0875fa02462858cb5aaf5a9c0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ft_system_get_time_counter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the system time counter. </p>
<dl class="section return"><dt>Returns</dt><dd>Time counter value. This is an example of getting the current time of the FT library: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// Printing the current Freescale Touch library time</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;printf(&quot;The current FT library time is: &amp;d ms since start.\n&quot;, ft_system_get_time_counter());</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gae04b34febe878976bb1a576117ebcc07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ft_system_get_time_offset </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>event_stamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the system time counter offset. </p>
<dl class="section return"><dt>Returns</dt><dd>Time counter offset value. This is an example of getting the current time of the FT library: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// Printing the current Freescale Touch library time offset</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;printf(&quot;The FT library time offset is: &amp;d ms since start.\n&quot;, ft_system_get_time_offset());</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gad603a0aa1bd902f8806fdce53d59bd59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ft_system_register_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__system.html#ga28f4a21ff708fad081dca489456b5d7c">ft_system_callback</a>&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register the system callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>Pointer to the callback function, which will receive the system event notifications. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none This is an example of installing and using the parameters of the FT library system events handler: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;static void my_ft_system_callback(uint32_t event);</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;// To catch the system events, install the system handler</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;ft_system_register_callback(my_ft_system_callback)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;// The FT system events handling routine</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;static void my_ft_system_callback(uint32_t event)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;{</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  if(event == FT_SYSTEM_EVENT_OVERRUN)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  {  </div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    printf(&quot;\nThe measured data has been overrun. Call more frequently ft_task();&quot;);</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  }</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  else if(event == FT_SYSTEM_EVENT_DATA_READY)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  {  </div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    printf(&quot;\nThere is new data in the FT library.);</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  }</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga14cde39a0c9235c7212f936ad149ca9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ft_task </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Freescale Touch Main processing entry point. </p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>FT_SUCCESS when data acquired during the last trigger are now processed</li>
<li>FT_FAILURE when no new data are ready</li>
</ul>
</dd></dl>
<p>This function should be called by the application as often as possible, in order to process the data acquired during the data trigger. This function should be called at least once per trigger time.</p>
<p>Internally, this function passes the FT_SYSTEM_MODULE_PROCESS and FT_SYSTEM_CONTROL_PROCESS command calls to each object configured in <a class="el" href="group__modules.html">Modules</a> and <a class="el" href="group__controls.html">Controls</a>. This is an example of running a task of the FT library: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;uint8_t ft_memory_pool[512];</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;if(ft_init(&amp;my_ft_system_params, ft_memory_pool, sizeof(ft_memory_pool)) == FT_FAILURE)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;{</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  printf(&quot;Initialization of FT failed. There can be problem with memory size</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  or invalid parameters in component parameter structures.&quot;);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;// The FT is successfuly initialized</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;// Main never-ending loop of the application</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;while(1)</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;{</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  if(ft_task() == FT_SUCCESS)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  {</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    // New data has been processed</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  }</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;}</div></div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga8c3d292e73744476ecab6d5f0423e388"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ft_trigger </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main Trigger function to acquire the touch-sensing data. </p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>FT_SUCCESS when the trigger was performed without any errors or warnings.</li>
<li>FT_FAILURE when a problem is detected, such as module not ready, overrun (data loss) error, and so on. Regardless of the error, the trigger is always initiated.</li>
</ul>
</dd></dl>
<p>This function should be called by the application periodically in a timer interrupt, or in a task to trigger new data measurement. Depending on the <a class="el" href="group__modules.html">Modules</a> implementation, this function may take the data immediately, or may only start the hardware sampling with interrupt enabled. This is an example of the FT library triggering: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;//For example, there is a callback routine from any priodical source (for example 5 ms)   </div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;static void Timer_5msCallBack(void)</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;{</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; if(ft_trigger() != FT_SUCCESS)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    // Trigger error</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  }</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
